{% extends "layout.html" %}
{% block main %}
<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
            <div class="well lead-well">

                <h3>TrueNTH</h3>

                <hr />
                <h4>Explore on Your Own</h4>
                <p>You've chosen to browse through TrueNTH without telling us about yourself. You can access all of its content, but we won't be able to personalize it for you.</p>
                <br />

                <div id="patientQuestions">

                    <p><strong>Would you like to explore treatment decision-making for early stage prostate cancer?</strong></p>
                    <div class="btn btn-default" name="biopsy" data-value="true">Yes</div> &nbsp;&nbsp;&nbsp; <div class="btn btn-default" name="biopsy" data-value="false">No</div>

                    <br /><br />
                    <p><strong>Have you been treated for prostate cancer and would you like to learn about taking care of side effects and symptoms at home?</strong></p>
                    <div class="btn btn-default" name="pca_diag" data-value="true">Yes</div> &nbsp;&nbsp;&nbsp; <div class="btn btn-default" name="pca_diag" data-value="false">No</div>

                    <br /><br />
                    <p><strong>Would you like to view some other web information on prostate cancer?</strong></p>
                    <div class="btn btn-default" name="tx" data-value="true">Yes</div> &nbsp;&nbsp;&nbsp; <div class="btn btn-default" name="tx" data-value="false">No</div>


                </div>

                <br /><br />
                <p>We're working hard to provide helpful information to men with prostate cancer. What would you like to know about that's not on the TrueNTH website?</p>


            </div>
        </div>
    </div>
</div>
<script>
$(document).ready(function(){

    $("#patientQuestions .btn").on("click", function(){
        var toCall = $(this).attr("name");
        // Get value from div - either true or false
        var theVal = $(this).attr("data-value");
        $.ajax ({
            type: "POST",
            url: '/api/'+toCall+'/', // add user id here when we have that
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            data: theVal // Do we need to wrap in object?
        }).done(function() {
            // Can reveal additional questions here if we display one at a time
        }).fail(function() {
            alert("There was a problem updating your profile. Please try again.");
        });
    });
    /** Send the AJAX **/

});
</script>
{% endblock %}
